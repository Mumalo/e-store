{% load staticfiles %}
{% load static %}
{% load auction_tags %}
{% load notifications_tags %}
{% load auction_tags %}
{% load page_tags %}

<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="utf-8">
	<meta http-equiv="X-UA-Compatible" content="IE=edge">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<!-- The above 3 meta tags *must* come first in the head; any other head content must come *after* these tags -->

	<title>{% block title %}IA-STORE{% endblock %}</title>


    {% block head %}
	<!-- Google font -->
	<link href="https://fonts.googleapis.com/css?family=Hind:400,700" rel="stylesheet">

	<!-- Bootstrap -->
	<!-- Latest compiled and minified CSS -->
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css" integrity="sha384-BVYiiSIFeK1dGmJRAkycuHAHRg32OmUcww7on3RYdg4Va+PmSTsz/K68vbdEjh4u" crossorigin="anonymous">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">

	<!-- Slick -->
	<link rel="stylesheet" href="{% static 'css/slick.css'  %}" />
	<link rel="stylesheet" href="{% static 'css/slick-theme.css' %}" />

	<!-- nouislider -->
	<link rel="stylesheet" href="{% static 'css/slick-theme.css' %}" />

	<!-- Font Awesome Icon -->
	<link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">

	<!-- Custom stlylesheet -->
	<link rel="stylesheet" href="{% static 'css/style.css' %}" />

    <!-- owl carousel -->
    <link  href="{% static 'css/owlcarousel/owl.carousel.min.css' %}" rel="stylesheet">
    <link  href="{% static 'css/owlcarousel/owl.theme.default.min.css' %}" rel="stylesheet">

    <!-- star ratings  -->
    <link rel="stylesheet" href="{% static 'star-ratings/css/star-ratings.css' %}">

	<!-- HTML5 shim and Respond.js for IE8 support of HTML5 elements and media queries -->
	<!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
	<!--[if lt IE 9]>
		  <script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
		  <script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
		<![endif]-->
   {% block extrahead %}{% endblock %}
   {% endblock %}


</head>

<body>
	<!-- HEADER -->
	<header>
		<!-- top Header -->
		<div id="top-header">
			<div class="container" style="">
				<div class="pull-left">
					<span>Welcome to IA-SHOP!</span>
				</div>
				<div class="pull-right">
                    &nbsp;&nbsp;&nbsp;
					<ul class="header-top-links">
						<li><a href="#">Buy</a></li>
						<li><a href="#">Sell</a></li>
						<li><a href="#">FAQ</a></li>
                    <!-- Site notification begins here -->
                    {% register_notify_callbacks callbacks='fill_notification_list,fill_notification_badge' %}
                    {% notifications_unread as unread_count %}

                    <!-- notification lif starts here -->
{#                        <li class="dropdown pagination-centered bell">#}
{#                            <a href="#" class="dropdown-button notification-badge" data-activates="dropdown2" style="padding-left: 0; padding-right: 0">#}
{##}
{#                                 {% if not request.user.is_authenticated %}#}
{#                                    <i class="glyphicon glyphicon-bell" onclick="loginalert()">#}
{#                                        <span class="notification-count text-center" style="color: #fff; background: #990000">0</span>#}
{#                                    </i>#}
{#                                {% endif %}#}
{#                                {% if  request.user.is_authenticated and unread_count > 0%}#}
{#                                    <i class="glyphicon glyphicon-bell" data-action="{{request.user}}">#}
{#                                        <div class="notification-count text-center" style="color: #fff; background: #990000">{% live_notify_badge %}</div>#}
{#                                    </i>#}
{#                                {% elif  request.user.is_authenticated and unread_count == 0 %}#}
{#                                    <i class="glyphicon glyphicon-bell" data-action="{{request.user}}">#}
{#                                        <div class="notification-count text-center" style="color: #333">{% live_notify_badge %}</div>#}
{#                                    </i>#}
{#                                {% endif %}#}
{#                            </a>#}
{#                   <!--if there is an unread notification, show dropdown -->#}
{#                        {% if request.user.is_authenticated %}#}
{#                            <ul id="dropdown2" class="dropdown-content notifications list-group">#}
{#                                <li class="list-group-item">#}
{#                                    <!--<div class="notification-heading" >-->#}
{#                                        <table style="border: none" >#}
{#                                            <tr >#}
{#                                                <td class="user-notifications menu-title" data-action="{{request.user}}"><a href="#"><span class="glyphicon glyphicon-remove-sign"></span>Mark All as Read</a></td>#}
{##}
{#                                            </tr>#}
{#                                        </table>#}
{#                                </li>#}
{##}
{#                                 <!-- left so for testing purposes -->#}
{#                                {% notifications_unread as unread_count %}#}
{#                                {% if unread_count %}#}
{#                                 {% for notification in user.notifications.unread %}#}
{#                                    <li class="notification-dropdown-li list-group-item">#}
{#                                        <div class="row no-gutter all-notifications" style="margin-bottom: 0px !important; margin-top: 0px !important;">#}
{#                                            <div class="col-xs-2 col-md-2 col-sm-2 notification">#}
{#                                                {% if notification.actor.profile.photo %}#}
{#                                                    <img src="{{ notification.actor.profile.photo.url}}" class="img-responsive small-image">#}
{#                                                {% else %}#}
{#                                                    <img src="{% static 'images/no_image.png' %}" class="img-responsive small-image">#}
{#                                            </div>#}
{##}
{#                                            <div class="col-sm-8 col-xs-8 col-md-8 notification text-center notification-text" >#}
{#                                                <p>#}
{#                                                    <a href="{{notification.actor.get_absolute_url}}" >{{ notification.actor}}</a>  {{ notification.verb }}#}
{#                                                     {{ notification.timesince }} ago#}
{#                                                </p>#}
{#                                            </div>#}
{##}
{#                                            <div class="col-xs-2 col-sm-2 col-md-2 notification" style="padding-right: 0 !important;">#}
{#                                                {% if notification.target %}#}
{#                                                    {% with notification.target.image.all|first as image %}#}
{#                                                        {% if image.image %}#}
{#                                                            <a href="{% url 'auctions:bid' notification.target.id %}">#}
{#                                                                <img src="{{ image.image.url}}" class="img-responsive small-image">#}
{#                                                            </a>#}
{#                                                        {% else %}#}
{##}
{#                                                            <a href="{% url 'auctions:bid' notification.target.id %}">#}
{#                                                                <img src="{% static 'images/no_image.png' %}" class="img-responsive small-image">#}
{#                                                            </a>#}
{#                                                        {% endif %}#}
{#                                                    {% endwith %}#}
{##}
{#                                                {% endif %}#}
{#                                                <span class="glyphicon glyphicon-remove-circle mark-as-read" data-id="{{notification.id}}" id="{{notification.id}}"></span>#}
{#                                            </div>#}
{#                                        </div>  <!-- end the div row -->#}
{#                                    </li>#}
{#                                 {% endfor  %}#}
{#                            {% endif %}<!-- end if uncread_count -->#}
{#                            </ul>#}
{#                        {% endif %}#}
{#                        </li>#}
                    <!-- end of notification -->
					</ul>
                    <!-- end of header top links -->
				</div>
			</div>
		</div>
		<!-- /top Header -->

		<!-- header -->
		<div id="header">
			<div class="container">
					<div class="wrap">
						{% search_form %}
					</div>
					<!-- /Search -->
				<div class="pull-right">
					<ul class="header-btns">
						<!-- Account -->
						<li class="header-account dropdown default-dropdown">
							<div class="dropdown-toggle" role="button" data-toggle="dropdown" aria-expanded="true">
								<div class="header-btns-icon">
									<i class="fa fa-user-o"style=""></i>
								</div>
                                <a href="#" class="text-uppercase">Login</a> / <a href="#" class="text-uppercase">Join</a>
							</div>
                            <a>MY STORE</a>
							<ul class="custom-menu">
								<li><a href="#"><i class="fa fa-user-o"></i> My Account</a></li>
								<li><a href="#"><i class="fa fa-heart-o"></i> My Wishlist</a></li>
								<li><a href="#"><i class="fa fa-exchange"></i> Compare</a></li>
								<li><a href="{% url 'accounts:login' %}"><i class="fa fa-unlock-alt"></i> Login</a></li>
								<li><a href="#"><i class="fa fa-user-plus"></i> Create An Account</a></li>
							</ul>
						</li>
						<!-- /Account -->

						<!-- Notification -->
                        <li class="notifications" style="margin-top: 3px">
                            <a><i class="fa fa-heart-o" ></i></a>
                        </li>
						<!-- /Notification -->

						<!-- Mobile nav toggle-->
						<li class="nav-toggle">
							<button class="nav-toggle-btn main-btn icon-btn"><i class="fa fa-bars"></i></button>
						</li>
						<!-- / Mobile nav toggle -->
					</ul>
				</div>
			</div>
			<!-- header -->
		</div>
		<!-- container -->
	</header>
	<!-- /HEADER -->

    {% block content %}

    {% endblock %}

	<!-- FOOTER -->
	<footer id="footer" class="section section-grey">
		<!-- container -->
		<div class="container">
			<!-- row -->
			<div class="row">
				<!-- footer widget -->
				<div class="col-md-3 col-sm-6 col-xs-6">
					<div class="footer">
						<!-- footer logo -->
						<div class="footer-logo">
							<a class="logo" href="#">
		            <img src="{% static 'img/logo.png' %}" alt="">
		          </a>
						</div>
						<!-- /footer logo -->

						<p>Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor incididunt ut labore et dolore magna</p>

						<!-- footer social -->
						<ul class="footer-social">
							<li><a href="#"><i class="fa fa-facebook"></i></a></li>
							<li><a href="#"><i class="fa fa-twitter"></i></a></li>
							<li><a href="#"><i class="fa fa-instagram"></i></a></li>
							<li><a href="#"><i class="fa fa-google-plus"></i></a></li>
							<li><a href="#"><i class="fa fa-pinterest"></i></a></li>
						</ul>
						<!-- /footer social -->
					</div>
				</div>
				<!-- /footer widget -->

				<!-- footer widget -->
				<div class="col-md-3 col-sm-6 col-xs-6">
					<div class="footer">
						<h3 class="footer-header">My Account</h3>
						<ul class="list-links">
							<li><a href="#">My Account</a></li>
							<li><a href="#">My Wishlist</a></li>
							<li><a href="#">Compare</a></li>
							<li><a href="#">Checkout</a></li>
							<li><a href="#">Login</a></li>
						</ul>
					</div>
				</div>
				<!-- /footer widget -->

				<div class="clearfix visible-sm visible-xs"></div>

				<!-- footer widget -->
				<div class="col-md-3 col-sm-6 col-xs-6">
					<div class="footer">
						<h3 class="footer-header">Customer Service</h3>
						<ul class="list-links">
							<li><a href="#">About Us</a></li>
							<li><a href="#">Shiping & Return</a></li>
							<li><a href="#">Shiping Guide</a></li>
							<li><a href="#">FAQ</a></li>
						</ul>
					</div>
				</div>
				<!-- /footer widget -->

				<!-- footer subscribe -->
				<div class="col-md-3 col-sm-6 col-xs-6">
					<div class="footer">
						<h3 class="footer-header">Stay Connected</h3>
						<p>Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor.</p>
						<form>
							<div class="form-group">
								<input class="input" placeholder="Enter Email Address">
							</div>
							<button class="primary-btn">Join Newslatter</button>
						</form>
					</div>
				</div>
				<!-- /footer subscribe -->
			</div>
			<!-- /row -->
			<hr>
			<!-- row -->
			<div class="row">
				<div class="col-md-8 col-md-offset-2 text-center">
					<!-- footer copyright -->
					<div class="footer-copyright">
						<!-- Link back to Colorlib can't be removed. Template is licensed under CC BY 3.0. -->
						Copyright &copy;<script>document.write(new Date().getFullYear());</script> All rights reserved | This template is made with <i class="fa fa-heart-o" aria-hidden="true"></i> by <a href="https://colorlib.com" target="_blank">Colorlib</a>
						<!-- Link back to Colorlib can't be removed. Template is licensed under CC BY 3.0. -->
					</div>
					<!-- /footer copyright -->
				</div>
			</div>
			<!-- /row -->
		</div>
		<!-- /container -->
	</footer>
	<!-- /FOOTER -->

	<!-- jQuery Plugins -->
    {% block js %}
            <!--<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>-->
            <script type="text/javascript" src="{% static 'star-ratings/js/dist/star-ratings.min.js' %}"></script>
            <script src="{% static 'js/jquery.matchHeight.js' %}" type="text/javascript"></script>
            <script src="{% static 'js/jquery.formset.js' %}" type="text/javascript"></script>
            <script>
                $('.image-formset').formset({
                   addText: 'Add',
                   deleteText: 'remove',
                   addCssClass: 'add',
                   deleteCssClass: 'del'

                });
            </script>
            <script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.4/jquery.min.js"></script>
            <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js"></script>
            <script src=" http://cdn.jsdelivr.net/jquery.cookie/1.4.1/jquery.cookie.min.js "></script>
            <script src="{% static 'notifications/notify.js' %}" type="text/javascript"></script>
            <script type="text/javascript" src="https://simplewebrtc.com/latest-v2.js"></script>
            <script src="{% static 'js/home.js' %}"></script>

            <script type="text/javascript" src="{% static 'star-ratings/js/dist/star-ratings.min.js' %}"></script>
            <script src="{% static 'js/jquery.matchHeight.js' %}" type="text/javascript"></script>
            <script src="{% static 'js/jquery.formset.js' %}" type="text/javascript"></script>
             <!--<script src="{% static 'js/countdown.js' %}"></script>-->
            <script src=" http://cdn.jsdelivr.net/jquery.cookie/1.4.1/jquery.cookie.min.js "></script>
            <script src="{% static 'notifications/notify.js' %}" type="text/javascript"></script>
            <script type="text/javascript" src="https://simplewebrtc.com/latest-v2.js"></script>
                <script>
                    $('.image-formset').formset({
                       addText: 'Add',
                       deleteText: 'remove',
                       addCssClass: 'add',
                       deleteCssClass: 'del'

                    });
                </script>

         <script>
                $(document).ready(function() {

                    $('#cat-select').on('change', function () {
                        var selectedopt = $(this).find('option:selected')
                        var selectedval = selectedopt.val()
                        var options = ''
                        var cat_name = selectedopt.text()

                        $.post("{% url 'auctions:select-by-category' %}",
                                {category: cat_name},
                                function (data) {
                                     $('#sub-cat-select').each(function(){
                                         $('#sub-cat-select option').remove()
                                     })
                                    for (i = data.length -1; i >= 0; i--){
                                        options += ('<option  value="' + data[i] + '">'+ data[i] + '</option>')
                                    }
                                  $('#sub-cat-select').append(options)
                                });

                    }).change()

                    $("#sub-cat-select").change(function(){
                         var subcat = $(this).find('option:selected').val()
                         var options = ''

                        $.post("{% url 'auctions:select-by-subcat'%}",
                                {
                                    subcat:subcat
                                },

                                function(data){
//                                    alert(data)

                                    $("#sub-cat-select2").each(function(){
                                        $("#sub-cat-select2 option").remove()
                                    })

                                    for (i = data.length -1; i >= 0; i--){

                                        options += ('<option  value="' + data[i] + '">'+ data[i] + '</option>')

                                    }

                                    $('#sub-cat-select2').append(options)
                                }

                        )



                    }).change()

                    $('.cat-list').hover(function(){
                         var el = $('#subcats');
                         var current_cat = $(this).data('action');
                         $(this).append(el)
                            el.css('display', 'inline-block')
                            el.css('position', 'absolute')
                            el.css('z-index', '3')
                    $.post("{% url 'auctions:subcats-for-cats' %}",
                        { cat:current_cat},
                        function(data) {
                            el.empty()
                            if (jQuery.isEmptyObject(data)){
                                el.css('display', 'none')
                            }
                            var items_array = []

                            for (val in data){
//                                alert(data[val])
                                id_val = val
                                json_parsed_items = JSON.parse(data[val])
//                                alert(json_parsed_items)
                                 var heads = $('<div class="col-md-4" id="' + id_val +'" style="color: white !important;"></div>')
                                 heads.append('<h6 style="border-bottom: 1px solid #337ab7; text-transform: capitalize">' + val + '</h6>')
                                 items_array.push(json_parsed_items)
                                 item_ids = val + 'item'
                                 el.append(heads)

                                 item = $('<div class="list-group row"  id="' + item_ids + '"></div>')


                                for (i in json_parsed_items ){
//
                                    item_slug = json_parsed_items[i]["fields"]["slug"]
                                    item_key = json_parsed_items[i]["pk"]
                                    var url = "{% url 'auctions:subcat2_detail' 12 13 %}".replace(12, item_key).replace(13, item_slug)
//                                    var url = "{% url 'auctions:bid' 13 %}".replace(12, item_key)
//                                    alert(url)
                                    link = $('<a class="" style="color: white !important; display: block; padding: 6px" href="' + url+ '" >'+ json_parsed_items[i]["fields"]["name"] + '</a>')
                                    item.append(link)
                                }

                                if (item.attr('id').includes(heads.attr('id'))){
                                    heads.append(item)
                                }
                            }
                    })

                    },
                        function(){
                            //$( this ).find( '.sub-cat-on-hover:last' ).remove();
                            $( this ).find( '#subcats' ).css('display', 'none')
                        }
                    );

//                    End of hover display function

                    $('.follow-button').click(function(e){
                        e.preventDefault

                        $.post('{% url "accounts:follow" %}',
                                {
                                    id: $(this).data('id'),
                                    action:$(this).data('action')

                                },

                                function(data){
//                                    alert(data['status'])
                                    if (data['status'] == 'ok'){
                                        var prev_action = $('.follow-button').data('action');

//                                        toggle action

                                        $(".follow-button").data('action',
                                        prev_action == 'follow' ? 'unfollow': 'follow')

//                                        Toggle the link text
                                        $('.follow-button').text(
                                                prev_action == 'follow' ? 'Unfollow': 'Follow'
                                        )

//                                        Update total followers

                                        var prev_followers = parseInt($('.followers-count .total-followers').text());
                                            $('.followers-count .total-followers').text(prev_action == 'follow' ?
                                            prev_followers + 1: prev_followers -1);
                                    }
                                }
                        )
                    })

//                    Watch auction function

                    $('.watch-auction').click(function(e){
                        e.preventDefault
//                            alert($(this).data('id'))
//                        alert($(this).find('.action').text())
                        $.post('{% url "shopping-cart:watch" %}',
                                {
                                    id: $(this).data('id'),
                                    action: $(this).data('action')
                                },
                                function(data){
//
                                        if (data['status'] == 'ok'){
                                            id = String(data['id'])
//                                            Toggle the data
                                           var  prev_action = $('#' +id).data('action')
                                            $('#' +id).data('action',
                                            prev_action == 'watch' ? 'unwatch' : 'watch')

//                                            Toggle the text

                                            $('#' +id).text(
                                                    prev_action == 'watch' ? 'Unwatch': 'Watch'
                                            )
                                        }
                                }
                        )
                        id = $(this).data('id')
                        $('.watch-list-content').find("#" +id).fadeOut(1000)
                    }
                    )


                    $('.all-notifications').mouseover(function(){
                            $('.mark-as-read').each(function(){
                                $(this).css('display','inline-block')
                            })
                        })

                    $('.all-notifications').mouseout(function(){
                            $('.mark-as-read').each(function(){
                                $(this).css('display','none')
                            })
                        })

                     $('.mark-as-read').click(function(){
                            var el_id = $(this).data('id')

                         $.post('{% url "auctions:mark-as-read" %}',
                                 {
                                     id:$(this).data('id')
                                 },

                                 function(data){
//                                     alert(data['status'])

                                     if (data['status'] == 'ok'){
                                        $("#" + el_id).fadeOut(1000)
                                     }
                                 }
                         )
                     })


                    $('.user-notifications').click(function(){
//                            alert('i am clicked')
//                        alert($(this).data('action'))

                         $.post('{% url "auctions:mark-all-as-read" %}',
                                 {
                                     recipient: $(this).data('action')
                                 },

                                 function(data){
//                                     alert(data['status'])
                                 }
                         )

                    })

                     $('.close').click(function(){
                        $('.messages').fadeOut(1000)
                    })



//                    Initialize the modal plugin
                     $('.modal').modal({
                            dismissible: true, // Modal can be dismissed by clicking outside of the modal
                            opacity: .5, // Opacity of modal background
                            inDuration: 400, // Transition in duration
                            outDuration: 400, // Transition out duration
                            startingTop: '4%', // Starting top style attribute
                            endingTop: '10%',
                     });

                    $("#auction").on('change', function(){

//                        $(this).find('option:first-child').remove()
                        var selected = $(this).find('option:selected').val()

                        var start = $("#start_time")
                        var startlabel = $("label[for='"+start.attr('id')+"']")
                        var end = $("#end_time")
                        var endlabel = $("label[for='"+end.attr('id')+"']")
                        var price = $("#start_price")
                        var pricelabel = $("label[for='"+price.attr('id')+"']")

                        if ((selected == '1') || (selected == '2')){
                            start.prop('required', true)
                            end.prop('required', true)
                            price.prop('required', true)

                            if (!start.is(':visible') && !startlabel.is(':visible')){
                                start.fadeIn(1000)
                                startlabel.fadeIn(1000)

                            }
                            if (!end.is(':visible') && !endlabel.is(':visible')){
                                end.fadeIn(1000)
                                endlabel.fadeIn(1000)
                            }

                            if (!price.is(':visible') && !pricelabel.is(':visible')){
                                price.fadeIn(1000)
                                pricelabel.fadeIn(1000)
                            }
                        }

                        else{

                            start.prop('required', false)
                            end.prop('required', false)
                            price.prop('required', false)

                            start.fadeOut(1000)
                            startlabel.fadeOut(1000)
                            end.fadeOut(1000)
                            endlabel.fadeOut(1000)
                            price.fadeOut(1000)
                            pricelabel.fadeOut(1000)




                        }
                    })

//                    Match column heights to avoid unequal height issue in bootstrap

                    $(".box").matchHeight()

//                    image upload for budget plan

                    $("#upload").change(function(){
                       $("#uploadFile").attr('value', $(this).val())
//                        alert($("#uploadFile").val())
                    })

                    $(".delete_item").click(function(e){
                        e.preventDefault()
                        var id = $(this).data('id')
                        var action = $(this).data('action')
                        var r = confirm('Are you sure you want to delete this item'.replace('item', action))


                        $.post("{% url 'auctions:delete_budget' %}",
                                {
                                    id: id,
                                    confirm:r,
                                    action:action,
                                },

                                function(data){
                                    if (data['status'] == 'ok'){
                                        alert('item deleted successfully'.replace('item', action))
                                        $("#" + id).fadeOut(1000)
                                    }
                                }

                        )
                    })


//                    $('.formset-container').formset({
//                              addText: 'add',
//                              deleteText: 'remove'
//                    });


                    function getCookie(name) {
                        var cookieValue = null;
                        var i = 0;
                        if (document.cookie && document.cookie !== '') {
                            var cookies = document.cookie.split(';');
                            for (i; i < cookies.length; i++) {
                                var cookie = jQuery.trim(cookies[i]);
                                // Does this cookie string begin with the name we want?
                                if (cookie.substring(0, name.length + 1) === (name + '=')) {
                                    cookieValue = decodeURIComponent(cookie.substring(name.length + 1));
                                    break;
                                }
                            }
                        }
                        return cookieValue;
                    }
                    var csrftoken = getCookie('csrftoken');

                    function csrfSafeMethod(method) {
                        // these HTTP methods do not require CSRF protection
                        return (/^(GET|HEAD|OPTIONS|TRACE)$/.test(method));
                    }
                    $.ajaxSetup({
                        crossDomain: false, // obviates need for sameOrigin test
                        beforeSend: function(xhr, settings) {
                            if (!csrfSafeMethod(settings.type)) {
                                xhr.setRequestHeader("X-CSRFToken", csrftoken);
                            }
                        }
                    });
                })

                function loginalert(){
                        alert('Please Login')
                    }
            </script>

            {% block extrajs %}{% endblock %}
    {% endblock %}

</body>

</html>
